<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Importu PRO</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #000;
            color: #fff;
            font-size: 11px;
            line-height: 1.2;
            overflow-x: hidden;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 0.5rem;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            text-align: center;
            padding: 0.4rem 0;
            border-bottom: 1px solid #333;
            margin-bottom: 0.5rem;
            flex-shrink: 0;
        }

        h1 {
            font-size: 1.25rem;
            font-weight: 700;
            background: linear-gradient(135deg, #007aff, #34c759);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .mode-toggle {
            display: flex;
            justify-content: center;
            gap: 0.4rem;
            margin-bottom: 0.5rem;
            flex-shrink: 0;
        }

        .mode-btn {
            padding: 0.35rem 1rem;
            border: 1px solid #333;
            border-radius: 4px;
            background: #1c1c1e;
            color: #888;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
        }

        .mode-btn.active {
            border-color: #007aff;
            background: #007aff;
            color: white;
        }

        .section { display: none; flex: 1; overflow-y: auto; }
        .section.active { display: flex; flex-direction: column; }

        /* ULTRA COMPACT GRID */
        .grid-main {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 0.5rem;
            flex: 1;
            min-height: 0;
        }

        @media (max-width: 1200px) {
            .grid-main { grid-template-columns: 1fr; }
        }

        .card {
            background: #1c1c1e;
            border-radius: 6px;
            padding: 0.5rem;
            border: 1px solid #333;
        }

        .card-title {
            font-size: 0.75rem;
            font-weight: 700;
            color: #007aff;
            margin-bottom: 0.35rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.35rem;
            margin-bottom: 0.35rem;
        }

        label {
            display: block;
            font-size: 0.625rem;
            color: #888;
            font-weight: 600;
            margin-bottom: 0.2rem;
            text-transform: uppercase;
        }

        input, select {
            width: 100%;
            padding: 0.35rem;
            border: 1px solid #333;
            border-radius: 3px;
            background: #2c2c2e;
            color: #fff;
            font-size: 0.75rem;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #007aff;
        }

        .btn {
            width: 100%;
            padding: 0.45rem;
            border: none;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 0.35rem;
        }

        .btn-primary { background: #007aff; color: white; }
        .btn:disabled { opacity: 0.5; }

        table {
            width: 100%;
            font-size: 0.6875rem;
        }

        table td {
            padding: 0.25rem 0;
            border-bottom: 1px solid #2c2c2e;
        }

        table td:first-child { color: #888; }
        table td:last-child {
            text-align: right;
            font-weight: 600;
        }

        .total-row td {
            border-top: 2px solid #007aff;
            padding-top: 0.35rem;
            font-weight: 700;
            font-size: 0.75rem;
        }

        .total-row td:last-child {
            color: #007aff;
            font-size: 0.9375rem;
        }

        /* AI SECTION - ULTRA COMPACT */
        .upload-mini {
            background: #1c1c1e;
            border: 2px dashed #007aff;
            border-radius: 6px;
            padding: 0.75rem;
            text-align: center;
            cursor: pointer;
            margin-bottom: 0.5rem;
        }

        .upload-icon { font-size: 1.5rem; margin-bottom: 0.25rem; }

        .thumbnails {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 0.35rem;
            margin-bottom: 0.5rem;
        }

        .thumbnail {
            position: relative;
            aspect-ratio: 1;
            border-radius: 4px;
            overflow: hidden;
            background: #2c2c2e;
            border: 1px solid #333;
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail-remove {
            position: absolute;
            top: 2px;
            right: 2px;
            background: #ff3b30;
            color: white;
            border: none;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 11px;
            cursor: pointer;
            line-height: 1;
        }

        .analyzing {
            background: #1c1c1e;
            border-radius: 6px;
            padding: 1rem;
            text-align: center;
            display: none;
        }

        .analyzing.show { display: block; }

        .spinner {
            border: 2px solid #2c2c2e;
            border-top: 2px solid #007aff;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 0.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* RESULTS - ONE SCREEN */
        .results-grid {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 0.5rem;
            flex: 1;
            min-height: 0;
        }

        @media (max-width: 1400px) {
            .results-grid { grid-template-columns: 1fr; }
        }

        .mini-card {
            background: #2c2c2e;
            border-radius: 4px;
            padding: 0.35rem;
        }

        .mini-label {
            font-size: 0.5625rem;
            color: #888;
            text-transform: uppercase;
            margin-bottom: 0.15rem;
        }

        .mini-value {
            font-size: 0.75rem;
            font-weight: 700;
            color: #007aff;
        }

        .verdict-box {
            background: linear-gradient(135deg, rgba(52, 199, 89, 0.15), rgba(52, 199, 89, 0.05));
            border: 1px solid #34c759;
            border-radius: 4px;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .verdict-title {
            font-size: 0.5625rem;
            color: #34c759;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 0.25rem;
        }

        .verdict-text {
            font-size: 0.6875rem;
            line-height: 1.3;
        }

        .price-compact {
            text-align: center;
            background: #1c1c1e;
            border-radius: 4px;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .price-label {
            font-size: 0.5625rem;
            color: #888;
            text-transform: uppercase;
            margin-bottom: 0.15rem;
        }

        .price-value {
            font-size: 1.25rem;
            font-weight: 900;
            color: #34c759;
            margin-bottom: 0.25rem;
        }

        .profit-mini {
            display: inline-block;
            background: rgba(52, 199, 89, 0.2);
            color: #34c759;
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.625rem;
        }

        .section-micro {
            margin-bottom: 0.5rem;
        }

        .section-micro-title {
            font-size: 0.625rem;
            font-weight: 700;
            color: #007aff;
            margin-bottom: 0.25rem;
            text-transform: uppercase;
        }

        .section-micro-content {
            font-size: 0.6875rem;
            line-height: 1.3;
        }

        .list-micro {
            list-style: none;
            padding: 0;
        }

        .list-micro li {
            padding: 0.15rem 0;
            padding-left: 0.75rem;
            position: relative;
            font-size: 0.6875rem;
        }

        .list-micro li::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0.15rem;
            color: #007aff;
        }

        .strategy-micro {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.35rem;
        }

        .strategy-micro-card {
            background: #2c2c2e;
            border-radius: 4px;
            padding: 0.4rem;
        }

        .strategy-micro-title {
            font-size: 0.5625rem;
            color: #007aff;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 0.25rem;
        }

        .strategy-micro-content {
            font-size: 0.625rem;
            line-height: 1.3;
            color: #ccc;
        }

        .hidden { display: none; }

        .api-input {
            width: 100%;
            padding: 0.35rem;
            background: #2c2c2e;
            border: 1px solid #333;
            border-radius: 4px;
            color: #fff;
            font-family: monospace;
            font-size: 0.6875rem;
            margin-bottom: 0.5rem;
        }

        .api-label {
            font-size: 0.625rem;
            color: #888;
            font-weight: 600;
            margin-bottom: 0.25rem;
            text-transform: uppercase;
        }

        .scrollable {
            overflow-y: auto;
            max-height: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöó Kalkulator Importu PRO</h1>
        </header>

        <div class="mode-toggle">
            <button class="mode-btn active" data-mode="simple">üßÆ Prosty</button>
            <button class="mode-btn" data-mode="ai">ü§ñ AI</button>
        </div>

        <!-- SIMPLE -->
        <div class="section active" id="simpleSection">
            <div class="grid-main">
                <div class="card">
                    <div class="card-title">üìù Dane</div>
                    <form id="sForm">
                        <div class="form-row">
                            <div><label>Koszt (EUR)</label><input type="number" id="sCost" step="0.01" required></div>
                            <div><label>Transport (EUR)</label><input type="number" id="sTransport" step="0.01" required></div>
                        </div>
                        <div class="form-row">
                            <div>
                                <label>Kraj</label>
                                <select id="sCountry" required>
                                    <option value="">‚Äî</option>
                                    <option value="BE|448">Belgia</option>
                                    <option value="CZ|448">Czechy</option>
                                    <option value="DE|448">Niemcy</option>
                                    <option value="AT|468">Austria</option>
                                    <option value="IT|628">W≈Çochy</option>
                                </select>
                            </div>
                            <div><label>Silnik (ccm)</label><input type="number" id="sEngine" step="1"></div>
                        </div>
                        <div><label>Kurs EUR/PLN</label><input type="number" id="sRate" value="4.22" step="0.0001" required></div>
                        <button type="submit" class="btn btn-primary">Oblicz</button>
                    </form>
                </div>

                <div class="card">
                    <div class="card-title">üí∞ Koszty</div>
                    <table>
                        <tr><td>Pojazd</td><td id="sResCar">‚Äî</td></tr>
                        <tr><td>Transport</td><td id="sResTransport">‚Äî</td></tr>
                        <tr><td>Dokumenty</td><td id="sResDocs">‚Äî</td></tr>
                        <tr><td>Akcyza</td><td id="sResExcise">‚Äî</td></tr>
                        <tr><td>Dodatkowe</td><td id="sResAdd">‚Äî</td></tr>
                        <tr class="total-row"><td>ALL-IN</td><td id="sResTotal">‚Äî</td></tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- AI -->
        <div class="section" id="aiSection">
            <div style="display: flex; flex-direction: column; height: 100%; gap: 0.5rem;">
                <div style="flex-shrink: 0;">
                    <div class="api-label">üîë Klucz API OpenAI</div>
                    <input type="password" id="apiKey" class="api-input" placeholder="sk-proj-...">

                    <div class="upload-mini" id="uploadZone">
                        <div class="upload-icon">üì∏</div>
                        <div style="font-size: 0.75rem; font-weight: 600;">AUTO1 screeny</div>
                        <input type="file" id="imageInput" accept="image/*" multiple class="hidden">
                    </div>

                    <div class="thumbnails" id="thumbnails"></div>

                    <button class="btn btn-primary" id="analyzeBtn" disabled>ü§ñ Analizuj</button>

                    <div class="analyzing" id="analyzing">
                        <div class="spinner"></div>
                        <div style="color: #888; font-size: 0.75rem;">Analizujƒô...</div>
                    </div>
                </div>

                <!-- RESULTS -->
                <div id="aiResults" style="display:none; flex: 1; min-height: 0;">
                    <div class="results-grid">
                        <!-- LEFT -->
                        <div class="scrollable">
                            <div class="card" style="margin-bottom: 0.5rem;">
                                <div class="card-title">üí∞ Koszty</div>
                                <table>
                                    <tr><td>Pojazd</td><td id="aCar">‚Äî</td></tr>
                                    <tr><td>Transport</td><td id="aTransport">‚Äî</td></tr>
                                    <tr><td>Dokumenty</td><td id="aDocs">‚Äî</td></tr>
                                    <tr><td>Akcyza</td><td id="aExcise">‚Äî</td></tr>
                                    <tr><td>Dodatkowe</td><td id="aAdd">‚Äî</td></tr>
                                    <tr class="total-row"><td>ALL-IN</td><td id="aTotal">‚Äî</td></tr>
                                </table>
                            </div>

                            <div class="card">
                                <div class="card-title">üöó Pojazd</div>
                                <div class="mini-card" style="margin-bottom: 0.35rem;">
                                    <div class="mini-label">Model</div>
                                    <div class="mini-value" id="aModel" style="font-size: 0.6875rem;">‚Äî</div>
                                </div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.35rem;">
                                    <div class="mini-card">
                                        <div class="mini-label">Rok</div>
                                        <div class="mini-value" id="aYear">‚Äî</div>
                                    </div>
                                    <div class="mini-card">
                                        <div class="mini-label">Przebieg</div>
                                        <div class="mini-value" id="aMileage" style="font-size: 0.625rem;">‚Äî</div>
                                    </div>
                                    <div class="mini-card">
                                        <div class="mini-label">Silnik</div>
                                        <div class="mini-value" id="aEngine">‚Äî</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- RIGHT -->
                        <div class="scrollable">
                            <div class="verdict-box">
                                <div class="verdict-title">üí° Werdykt</div>
                                <div class="verdict-text" id="aVerdict">‚Äî</div>
                            </div>

                            <div class="price-compact">
                                <div class="price-label">Cena sprzeda≈ºy</div>
                                <div class="price-value" id="aPrice">‚Äî</div>
                                <div class="profit-mini" id="aProfit">‚Äî</div>
                            </div>

                            <div class="card" style="margin-bottom: 0.5rem;">
                                <div class="section-micro">
                                    <div class="section-micro-title">üíµ Max cena</div>
                                    <div class="section-micro-content" id="aMaxPrice">‚Äî</div>
                                </div>

                                <div class="section-micro">
                                    <div class="section-micro-title">üìä Comps</div>
                                    <div class="section-micro-content" id="aComps">‚Äî</div>
                                </div>

                                <div class="section-micro">
                                    <div class="section-micro-title">‚úÖ Plusy</div>
                                    <ul class="list-micro" id="aPros"></ul>
                                </div>

                                <div class="section-micro">
                                    <div class="section-micro-title">‚ö†Ô∏è Ryzyka</div>
                                    <ul class="list-micro" id="aCons"></ul>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-title">üéØ Strategia</div>
                                <div class="strategy-micro" id="aStrategy"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Mode
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(btn.dataset.mode === 'simple' ? 'simpleSection' : 'aiSection').classList.add('active');
            });
        });

        // Simple calc
        document.getElementById('sForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const cost = parseFloat(document.getElementById('sCost').value) || 0;
            const transport = parseFloat(document.getElementById('sTransport').value) || 0;
            const docs = parseFloat(document.getElementById('sCountry').value.split('|')[1]) || 0;
            const engine = parseInt(document.getElementById('sEngine').value) || 0;
            const rate = parseFloat(document.getElementById('sRate').value) || 4.22;
            
            // POPRAWKA: base dla akcyzy = tylko pojazd, NIE pojazd+transport
            const carPLN = cost * rate;
            const transportPLN = transport * rate;
            const docsPLN = docs * rate;
            
            const exciseRate = engine > 0 ? (engine <= 1999 ? 0.031 : 0.186) : 0.031;
            const excisePLN = carPLN * exciseRate; // POPRAWIONE: tylko od pojazdu!
            
            const additionalPLN = 660;
            const total = carPLN + transportPLN + docsPLN + excisePLN + additionalPLN;
            
            document.getElementById('sResCar').textContent = fmt(carPLN);
            document.getElementById('sResTransport').textContent = fmt(transportPLN);
            document.getElementById('sResDocs').textContent = fmt(docsPLN);
            document.getElementById('sResExcise').textContent = fmt(excisePLN);
            document.getElementById('sResAdd').textContent = fmt(additionalPLN);
            document.getElementById('sResTotal').textContent = fmt(total);
        });

        function fmt(v) {
            return new Intl.NumberFormat('pl-PL', {maximumFractionDigits: 0}).format(v) + ' z≈Ç';
        }

        // AI
        const savedKey = localStorage.getItem('openai_api_key');
        if (savedKey) document.getElementById('apiKey').value = savedKey;

        document.getElementById('apiKey').addEventListener('change', (e) => {
            localStorage.setItem('openai_api_key', e.target.value);
            updateBtn();
        });

        let images = [];
        const uploadZone = document.getElementById('uploadZone');
        const imageInput = document.getElementById('imageInput');
        const thumbnails = document.getElementById('thumbnails');
        const analyzeBtn = document.getElementById('analyzeBtn');

        uploadZone.addEventListener('click', () => imageInput.click());
        uploadZone.addEventListener('dragover', (e) => e.preventDefault());
        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            handleFiles(Array.from(e.dataTransfer.files).filter(f => f.type.startsWith('image/')));
        });
        imageInput.addEventListener('change', (e) => handleFiles(Array.from(e.target.files)));

        async function handleFiles(files) {
            for (const file of files) {
                const base64 = await toBase64(file);
                const dataUrl = await toDataUrl(file);
                images.push({ file, base64, dataUrl });
            }
            updateThumbnails();
            updateBtn();
        }

        function toBase64(file) {
            return new Promise(r => {
                const reader = new FileReader();
                reader.onload = () => r(reader.result.split(',')[1]);
                reader.readAsDataURL(file);
            });
        }

        function toDataUrl(file) {
            return new Promise(r => {
                const reader = new FileReader();
                reader.onload = () => r(reader.result);
                reader.readAsDataURL(file);
            });
        }

        function updateThumbnails() {
            thumbnails.innerHTML = '';
            images.forEach((img, i) => {
                const div = document.createElement('div');
                div.className = 'thumbnail';
                div.innerHTML = `<img src="${img.dataUrl}"><button class="thumbnail-remove" onclick="removeImg(${i})">√ó</button>`;
                thumbnails.appendChild(div);
            });
        }

        window.removeImg = function(i) {
            images.splice(i, 1);
            updateThumbnails();
            updateBtn();
        }

        function updateBtn() {
            analyzeBtn.disabled = !document.getElementById('apiKey').value || images.length === 0;
        }

        analyzeBtn.addEventListener('click', analyze);

        async function analyze() {
            const key = document.getElementById('apiKey').value;
            if (!key) return;

            document.getElementById('analyzing').classList.add('show');
            document.getElementById('aiResults').style.display = 'none';

            try {
                const msgs = images.map(img => ({
                    type: 'image_url',
                    image_url: { url: `data:image/jpeg;base64,${img.base64}`, detail: 'high' }
                }));

                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${key}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4o',
                        messages: [{
                            role: 'user',
                            content: [
                                ...msgs,
                                { type: 'text', text: document.getElementById('prompt').textContent }
                            ]
                        }],
                        max_tokens: 3000,
                        temperature: 0.7,
                        response_format: { type: "json_object" }
                    })
                });

                if (!response.ok) throw new Error('API Error');

                const data = await response.json();
                const result = JSON.parse(data.choices[0].message.content);
                displayResults(result);

            } catch (error) {
                alert('‚ùå B≈ÇƒÖd: ' + error.message);
            } finally {
                document.getElementById('analyzing').classList.remove('show');
            }
        }

        function displayResults(r) {
            const {vehicle, costs, marketAnalysis, verdict, salesStrategy} = r;

            document.getElementById('aModel').textContent = vehicle.model;
            document.getElementById('aYear').textContent = vehicle.year;
            document.getElementById('aMileage').textContent = (vehicle.mileage/1000).toFixed(0) + 'k km';
            document.getElementById('aEngine').textContent = vehicle.engine + ' ccm';

            document.getElementById('aCar').textContent = fmt(costs.breakdown.vehicle);
            document.getElementById('aTransport').textContent = fmt(costs.breakdown.transport);
            document.getElementById('aDocs').textContent = fmt(costs.breakdown.documents);
            document.getElementById('aExcise').textContent = fmt(costs.breakdown.excise);
            document.getElementById('aAdd').textContent = fmt(costs.breakdown.additional);
            document.getElementById('aTotal').textContent = fmt(costs.totalPln);

            document.getElementById('aVerdict').textContent = `${verdict.decision} - ${verdict.reason}`;
            document.getElementById('aPrice').textContent = fmt(marketAnalysis.realSalePrice);
            document.getElementById('aProfit').textContent = `Zysk: ${fmt(verdict.profitPln)} (${verdict.profitPercent}%)`;
            document.getElementById('aMaxPrice').textContent = verdict.note;
            document.getElementById('aComps').textContent = `${marketAnalysis.compsCount} ofert | Mediana: ${fmt(marketAnalysis.compsMedian)} | Range: ${marketAnalysis.compsRange}`;

            document.getElementById('aPros').innerHTML = vehicle.keyFeatures.map(p => `<li>${p}</li>`).join('');
            document.getElementById('aCons').innerHTML = marketAnalysis.risks.map(c => `<li>${c}</li>`).join('');

            document.getElementById('aStrategy').innerHTML = `
                <div class="strategy-micro-card">
                    <div class="strategy-micro-title">üíµ Cena</div>
                    <div class="strategy-micro-content">${salesStrategy.listingPrice}</div>
                </div>
                <div class="strategy-micro-card">
                    <div class="strategy-micro-title">üìù Marketing</div>
                    <div class="strategy-micro-content">${salesStrategy.marketingTips}</div>
                </div>
            `;

            document.getElementById('aiResults').style.display = 'block';
        }
    });
    </script>

    <div id="prompt" style="display:none;">Jeste≈õ ekspertem rynku aut u≈ºywanych w Polsce. 

PARSUJ ZE SCREENA:
- auction_price_eur, transport_eur, country, vehicle (model, rok, przebieg, silnik ccm), equipment

OBLICZ KOSZTY (aplikacja):
base_pln = (auction_eur + transport_eur) √ó 4.22
docs_pln = docs_eur √ó 4.22 (BE/CZ/DE: 448, AT: 468, IT: 628)
excise_pln = (auction_eur √ó 4.22) √ó rate (‚â§1999ccm: 3.1%, >1999ccm: 18.6%)
all_in_pln = base_pln + docs_pln + excise_pln + 660

ANALIZA RYNKU:
1) Identyfikuj trim + opcje (klimatyzacja, automat, LED, nawigacja, sk√≥ra, 4x4)
2) Zbierz 8-15 comps z Otomoto/OLX (podobne: model, rok¬±1, silnik, skrzynia)
3) REALNA cena transakcyjna (NIE cena og≈Çoszenia!) + wide≈Çki
4) Confidence (Wysokie/≈örednie/Niskie) + ryzyka handlowe

WERDYKT:
profit = sale_price - all_in
Mar≈ºa OK: 3500-4500 z≈Ç | Min: 2500-3000 z≈Ç (tylko szybki obr√≥t)
KUP / ODPU≈öƒÜ / KUP DO CENY X

JSON:
{
  "vehicle": {
    "model": "≈†koda Citigo 1.0 MPI Ambition",
    "year": 2012,
    "mileage": 118128,
    "engine": 999,
    "priceEur": 1794,
    "transportEur": 537,
    "country": "BE",
    "trim": "Ambition",
    "keyFeatures": ["Klimatyzacja", "El. szyby", "5 drzwi", "Radio"]
  },
  "costs": {
    "totalPln": 12615,
    "breakdown": {
      "vehicle": 7570,
      "transport": 2266,
      "documents": 1890,
      "excise": 229,
      "additional": 660
    }
  },
  "marketAnalysis": {
    "compsCount": 12,
    "compsMedian": 17000,
    "compsRange": "15500-18500",
    "realSalePrice": 16500,
    "salePriceRange": "16000-17000",
    "positioning": "≈örodek rynku, negocjacja 15500-16000",
    "confidence": "Wysokie - MPI ma ≈õwietnƒÖ reputacjƒô, prosty segment",
    "risks": [
      "Segment bardzo cenoczu≈Çy",
      "Klient wybiera tanie auto wiƒôc mocno negocjuje"
    ]
  },
  "verdict": {
    "decision": "KUP",
    "reason": "Mar≈ºa 3885 z≈Ç (31%) - IDEALNE w za≈Ço≈ºeniach projektu. Prosty silnik MPI, dobry popyt.",
    "profitPln": 3885,
    "profitPercent": 31,
    "maxAllInPln": 13000,
    "note": "Wzorcowy przyk≈Çad - prosty, rotujƒÖcy, dobra mar≈ºa"
  },
  "salesStrategy": {
    "listingPrice": "16500-17000, negocjacja 15500-16000",
    "marketingTips": "Podkre≈õl: MPI = bardzo niezawodny, miejskie auto, tania eksploatacja, 5 drzwi"
  }
}

ZASADY:
- Wyceniaj REALNIE (nie zani≈ºaj)
- Uwzglƒôdnij koszty po stronie kupujƒÖcego (odrzuƒá auta wymagajƒÖce napraw mech/lakier)
- BƒÖd≈∫ konkretny dla polskiego rynku</div>
</body>
</html>
